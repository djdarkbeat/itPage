<?Lassoscript// Last modified 12/9/09 by ECL, Landmann InterActive// This software is covered by the Creative Commons "Attribution-No Derivative Works 3.0 Unported" license// See http://creativecommons.org/licenses/by-nd/3.0/// For the purposes of this license, the following apply:// 		Original Author: Eric Landmann// 		Licensor: Eric Landmann//		Work: The software included in this distribution known as "LI CMS"//	Communication regarding this license, contact Eric Landmann <elandmann@gmail.com>// CHANGE NOTES// 11/23/07// Recoded for CMS v. 3.0// 3/5/08// Added -MaxRecords=All to a number of Inline variables// 4/28/08// Removed $svFilesUploadProcessedPath// 5/6/08// Removing two obsolete color variables// 9/20/08// Expanded file upload to handle videos, adding vars for that// 11/30/08// Added $svPathToffmpeg - path to ffmpeg// 1/15/09// Added Story feature// 1/25/09// Added $svSecureFilesPath for filestream tag// 6/4/09// Finishing uploader for .swf files// 6/19/09// Adding new datatype "Gallery"// 8/16/09// Added environment checking vars// 8/25/09// Add image utility fields in Sys// 8/28/09// Modify Media Array ($svMediaExtArray) depending upon which utilities are installed// 9/20/09// Added a few missing filetypes// 10/31/09// Replaced FCKEditor with ckeditor// 12/9/09// Added GoogleTracker field in sys table// DebuggingVar('svDebug' = 'N');// Session VariablesVar('svSessionTimeout' = 30,	'svSessionName' = 'LI_CMS',	'svSessionAdminName' = 'LI_Admin');// Define Databases & User AuthenticationVar('svSiteDatabase' = 'itpage_cms_demo',	'svSiteUsername' = 'itpage_cms',	'svSitePassword' = '2F0a33X');// Crypto saltVar('svSalt' = 'XaP0S4xeuA7x%5_666');// Table NamesVar('svHeirarchyTable' = 'cms_heirarchy',	'svTestimonialsTable' = 'cms_testimonials',	'svStoriesTable' = 'cms_stories',	'svPortfolioTable' = 'cms_portfolio',	'svPortfolioGroupsTable' = 'cms_portfoliogroups',	'svPG2PortfolioTable' = 'cms_pg2portfolio',	'svGalleryTable' = 'cms_gallery',	'svGalleryGroupsTable' = 'cms_gallerygroups',	'svGG2GalleryTable' = 'cms_gg2gallery',	'svContentTable' = 'cms_content',	'svSectionTable' = 'cms_section',	'svUsersTable' = 'cms_users',	'svUserPrivsTable' = 'cms_userprivs',	'svQuestionsTable' = 'cms_questions',	'svStatesTable' = 'cms_states',	'svErrorsTable' = 'cms_errors',	'svSysTable' = 'cms_sys');// Fields Active/InactiveVar('svHeadlineActive' = 'Y',	'svSubheadActive' = 'Y',	'svAuthorActive' = 'N',	'svText1Active' = 'Y',	'svText2Active' = 'Y',	'svImageThumbActive' = 'Y',	'svImageMedActive' = 'Y',	'svImageLargeActive' = 'Y',	'svImageTitleActive' = 'Y',	'svImageCaptionActive' = 'Y',	'svPrice1Active' = 'N',	'svPrice2Active' = 'N',	'svURLActive' = 'Y',	'svActiveActive' = 'Y');// PassThru Username and Password// NOTE: Might need to be changed depending upon site// See SteepnBrew.comVar('svPassThruUsername' = 'upload_user');Var('svPassThruPassword' = 'upload');// Used to determine if we want to archive the original upload file// If so, files are renamed and moved to that pathVar('svArchiveOriginalUpload' = true);// System resource pathsVar('ThisFilename' = (((response_filepath)->(split:'/'))->(last)),	'svLibsPath' = '/site/libs/',	'svFCKEditorPath' = '/site/ckeditor/',	'svImagesPath' = '/site/images/',	'svImagesUploadPath' = '/images/',	'svImagesUploadProcessedPath' = '/images_processed/',	'svFilesUploadPath' = '/files/',	'svSecureFilesPath' = '/securefiles/Files/',	'svImagesThmbPath' = '/images/thumb/',	'svImagesMdPath' = '/images/med/',	'svImagesLrgPath' = '/images/large/',	'svMediaPath' = '/media/',	'svMediaThmbPath' = '/media/thumb/',	'svMediaMdPath' = '/media/med/',	'svMediaLrgPath' = '/media/large/',	'svJSPath' = '/site/js/',	'svCssPath' = '/site/css/',	'svToolTipsPath' = '/site/tooltips/',	'svTmpltsPath' = '/site/templates/',	'svIncludesPath' = '/includes/',	'svFileIconsPath' = '/site/images/icons/',	'svUserPhotos' = '/site/images/userphotos/');// Filetype arrays// svDocExtArray contains a list of all allowed file extensions// ImageExtArray contains a list of all allowed image extensions// svMediaExtArray contains a list of all allowed media extensionsVar('svDocExtArray' = (array('csv', 'doc', 'graffle', 'gz', 'indd', 'log', 'odp', 'ods', 'odt', 'pdf', 'pps', 'ppt', 'qxd', 'sit', 'sitx', 'svg', 'swf', 'txt', 'xls', 'zip')));Var('svImageExtArray' = (array('jpg', 'jpeg', 'gif', 'tif', 'tiff', 'png', 'psd')));Var('svMediaExtArray' = (array('avi', 'flv', 'm4v', 'mov', 'mp4', 'mpg', 'mpeg', 'swf', 'wmv')));// Design and Content VariablesVar('svInputHeaderColor' = '#666666',	'svInputContentColor' = '#cccccc');// Used on forms to show input is required	Var('svInputRequired' = '<font color="#FF3300"><strong>*</strong></font>');// Define the namespaceVar('svCTNamespace' = 'LI_');// Inline Variables// System InfoVar('IV_Sys'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svSysTable,		-KeyField='id',		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=1,		-SQL='')));// UsersVar('IV_Users'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svUsersTable,		-KeyField='id',		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=All,		-SQL='')));// PrivsVar('IV_UserPrivs'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svUserPrivsTable,		-KeyField='id',		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=All,		-Search='')));// QuestionsVar('IV_Questions'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svQuestionsTable,		-KeyField='id',		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=All,		-Search='')));// StatesVar('IV_States'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svStatesTable,		-KeyField='id',		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=All,		-Search='')));// ContentVar('IV_Content'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svContentTable,		-KeyField='id',		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=All,		-SQL='')));// TestimonialsVar('IV_Testimonials'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svTestimonialsTable,		-KeyField='id',		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=All,		-SQL='')));// StoriesVar('IV_Stories'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svStoriesTable,		-KeyField='id',		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=All,		-SQL='')));// PortfoliosVar('IV_Portfolios'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svPortfolioTable,		-KeyField='id',		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=All,		-SQL='')));// GalleriesVar('IV_Galleries'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svGalleryTable,		-KeyField='id',		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=All,		-SQL='')));// NestedSet Heirarchy VarsVar('gv_sql'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svHeirarchyTable,		-Username=$svSiteUsername,		-Password=$svSitePassword,		-SQL='')));Var('IV_Heirarchy'=	(Array(		-Database=$svSiteDatabase, 		-Table=$svHeirarchyTable,		-Username=$svSiteUsername,		-Password=$svSitePassword,		-MaxRecords=All,		-SQL='')));// Get the system settingsInline($IV_Sys, -SQL='SELECT * FROM ' $svSysTable ' LIMIT 1');	Var('svDomain' = Field:'Sys_Domain');	Var('svSMTP' = Field:'Sys_SMTP');	Var('svPostmasterEmail' = Field:'Sys_PostmasterEmail');	Var('svAdminEmail' = Field:'Sys_AdminEmail');	Var('svAuthUsername' = Field:'Sys_AuthUsername');	Var('svAuthPassword'=(Decrypt_Blowfish: -Seed=(Var:'svSalt'), (Field:'Sys_AuthPassword')) );	Var('svWebserverRoot' = Field:'Sys_WebserverRoot');	Var('svPathToIM' = Field:'Sys_PathToIM');	Var('svPathToffmpeg' = Field:'Sys_PathToffmpeg');	Var('svPathToswftools' = Field:'Sys_PathToswftools');	Var('svPathToPassThru' = Field:'Sys_PathToPassThru');	Var('svSys_Keywords' = Field:'Sys_Keywords');	Var('svSys_Expires' = Field:'Sys_Expires');	Var('svSys_Revisit' = Field:'Sys_Revisit');	Var('svSys_Robots' = Field:'Sys_Robots');	Var('svSys_Author' = Field:'Sys_Author');	Var('svSys_Description' = Field:'Sys_Description');	Var('svSys_Copyright' = Field:'Sys_Copyright');	Var('svSys_Title' = Field:'Sys_Title');	Var('svSys_Language' = Field:'Sys_Language');	Var('svSys_UseFavicon' = Field:'Sys_UseFavIcon');	Var('svSys_DefaultTemplate' = Field:'Sys_DefaultTemplate');	Var('svSys_DefaultStylesheet' = Field:'Sys_DefaultStylesheet');	Var('svSys_GoogleTracker' = Field:'Sys_GoogleTracker');/Inline;// ErrorsVar('vError' = string);Var('vOption' = string);// Used in Jono's xs_cat tagsVar('gv_error' = string);// This hack saves the debug status, then we turn it off until restoredVar('DebugStatus' = $svDebug);Var('svDebug' = 'N');// Get Heirarchy LabelsInclude(($svLibsPath)'get_HeirarchyLabels.inc');// Restore debuggingVar('svDebug' = $DebugStatus);// Modify Media Array depending upon which utilities are installed// If ffmpeg is not installed, remove all dependent extensionsIf($svPathToffmpeg == '');	$svMediaExtArray->(RemoveAll('avi'));	$svMediaExtArray->(RemoveAll('m4v'));	$svMediaExtArray->(RemoveAll('mov'));	$svMediaExtArray->(RemoveAll('mp4'));	$svMediaExtArray->(RemoveAll('mpg'));	$svMediaExtArray->(RemoveAll('mpeg'));	$svMediaExtArray->(RemoveAll('wmv'));/If;// If swftools is not installed, remove all dependent extensionsIf($svPathToswftools == '');	$svMediaExtArray->(RemoveAll('flv'));	$svMediaExtArray->(RemoveAll('swf'));/If;Debug;	'SiteConfig333: svMediaExtArray = ' $svMediaExtArray '<br>\n';/Debug;?>